#!/bin/bash

############################################################
# VARS                                           
############################################################

ID="apple-notes-cli"

############################################################
# REBUILD DIST FOLDER                                            
############################################################

if [[ -d "dist" ]]; then
	rm -r "dist"
fi

if [[ ! -d "dist" ]]; then
	mkdir dist
fi

############################################################
# ADD ALL BASH SCRIPTS IN ONE FILE                                           
############################################################

# echo "#!/bin/bash" >> dist/apple-notes-cli.sh
# echo "" >> dist/apple-notes-cli.sh
cat src/main.sh >> dist/apple-notes-cli.sh
#./src/main.sh >> "dist/$ID.sh"


############################################################
# CHANGE PERMS                                          
############################################################

chmod a+x "dist/$ID.sh"


############################################################
# COMPILATE TO BINARY                                         
############################################################

shc -f "dist/$ID.sh" -o "dist/$ID"


############################################################
# CHANGE PERMS AGAIN                                         
############################################################

chmod a+x dist/*

############################################################
# ZIP BINARY                                        
############################################################

cd dist
zip "$ID.zip" "$ID"
cd ..


############################################################
# CHANGE PERMS AGAIN                                         
############################################################

chmod a+x dist/*

############################################################